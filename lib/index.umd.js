(function(o,f){typeof exports=="object"&&typeof module<"u"?module.exports=f(require("vue")):typeof define=="function"&&define.amd?define(["vue"],f):(o=typeof globalThis<"u"?globalThis:o||self,o.vueVideoXg=f(o.Vue))})(this,function(o){"use strict";const f={id:"p"},w=["id"],E={name:"DNDList"},D=o.defineComponent({...E,props:{wrapClass:{},itemId:{},list:{}},emits:["change"],setup(a,{expose:c,emit:d}){const n=a,l=o.ref([...n.list]);let p=o.ref(0);const _=o.ref(l.value[0]),r=[];function k(t){x(),r.some((s,e)=>s.x==t.srcElement.offsetLeft&&s.y==t.srcElement.offsetTop?(p.value=e,m.value=e,_.value=l.value[e],!0):!1)}const m=o.ref(0);let i,h,y;o.onMounted(()=>{i=document.getElementById("p"),h=i.style.width,y=i.style.height,window.onresize=()=>{i=document.getElementById("p"),h=i.style.width,y=i.style.height}});function x(){i.style.height=i.offsetHeight+"px",i.style.width=i.offsetWidth+"px",r.splice(0);for(let t=l.value.length;t>0;t--){const s=l.value[t-1],e=document.getElementById(n.itemId?s[n.itemId]:s);r.unshift({x:e.offsetLeft,y:e.offsetTop}),e.style.width=e.offsetWidth+"px",e.style.height=e.offsetHeight+"px",e.style.left=e.offsetLeft+"px",e.style.top=e.offsetTop+"px",e.style.position="fixed"}}function I(){l.value.forEach(t=>{const s=document.getElementById(n.itemId?t[n.itemId]:t);s.style.width="auto",s.style.height="auto",s.style.position="static"}),i.style.width=h,i.style.height=y}o.watch(()=>m.value,t=>{console.log(t,r),p.value!=t&&(I(),l.value.splice(p.value,1),l.value.splice(t,0,_.value),p.value=t,o.nextTick(x))});function T(t){t.preventDefault();for(let s=r.length;s--;s>0){const e=r[s+1],v=r[s];if(t.x>v.x&&t.y>v.y&&(!e||t.x<e.x)){m.value=s;break}}}function L(t){t.preventDefault(),I(),d("change",l.value)}function b(){console.log("restore"),l.value=[...n.list],console.log(l.value),setTimeout(()=>{for(let t=l.value.length;t>0;t--){const s=l.value[t-1],e=document.getElementById(n.itemId?s[n.itemId]:s);e.style.left="auto",e.style.top="auto",r.unshift({x:e.offsetLeft,y:e.offsetTop})}},200)}return c({restore:b}),(t,s)=>(o.openBlock(),o.createElementBlock("div",f,[o.createElementVNode("div",{class:o.normalizeClass([n.wrapClass,"wrapClass"]),draggable:"true",onDragover:T,onDrop:L,style:{gap:"0"}},[(o.openBlock(!0),o.createElementBlock(o.Fragment,null,o.renderList(l.value,e=>(o.openBlock(),o.createElementBlock("div",{id:n.itemId?e[n.itemId]:e,key:n.itemId?e[n.itemId]:e,draggable:"true",class:"trp",onDragstart:k,style:{margin:"0"}},[o.renderSlot(t.$slots,"default",{item:e},()=>[o.createTextVNode(o.toDisplayString(e),1)],!0)],40,w))),128))],34)]))}}),V="";let B=[((a,c)=>{const d=a.__vccOpts||a;for(const[n,l]of c)d[n]=l;return d})(D,[["__scopeId","data-v-646aa57b"]])];const g=a=>{B.map(c=>{a.component(c.name,c)})};let u=window;return typeof u<"u"&&u.Vue&&g(u.Vue),{install:g}});
