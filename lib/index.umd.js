(function(t,d){typeof exports=="object"&&typeof module<"u"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(t=typeof globalThis<"u"?globalThis:t||self,t.vueVideoXg=d(t.Vue))})(this,function(t){"use strict";const d={id:"p"},E=["id"],v={name:"DNDList"},D=t.defineComponent({...v,props:{wrapClass:{},itemClass:{},direction:{},itemId:{},list:{}},emits:["change"],setup(a,{expose:c,emit:f}){const s=a,l=t.ref([...s.list]);let p=t.ref(0);const _=t.ref(l.value[0]),r=[];function k(e){x(),r.some((n,o)=>n.x==e.srcElement.offsetLeft&&n.y==e.srcElement.offsetTop?(p.value=o,m.value=o,_.value=l.value[o],!0):!1)}const m=t.ref(0);let i,y,h;t.onMounted(()=>{i=document.getElementById("p"),y=i.style.width,h=i.style.height,window.onresize=()=>{i=document.getElementById("p"),y=i.style.width,h=i.style.height}});function x(){i.style.height=i.offsetHeight+"px",i.style.width=i.offsetWidth+"px",r.splice(0);for(let e=l.value.length;e>0;e--){const n=l.value[e-1],o=document.getElementById(s.itemId?n[s.itemId]:n);r.unshift({x:o.offsetLeft,y:o.offsetTop}),o.style.left=o.offsetLeft+"px",o.style.top=o.offsetTop+"px",o.style.position="fixed"}}function I(){l.value.forEach(e=>{const n=document.getElementById(s.itemId?e[s.itemId]:e);n.style.position="static"}),i.style.width=y,i.style.height=h}t.watch(()=>m.value,e=>{console.log(e,r),p.value!=e&&(I(),l.value.splice(p.value,1),l.value.splice(e,0,_.value),p.value=e,t.nextTick(x))});function T(e){e.preventDefault();for(let n=r.length;n--;n>0){const o=r[n+1],w=r[n];if(e.x>w.x&&e.y>w.y&&(s.direction==="row"?!o||e.x<o.x:!o||e.y<o.y)){m.value=n;break}}}function C(e){e.preventDefault(),I(),f("change",l.value)}function L(){console.log("restore"),l.value=[...s.list],console.log(l.value),setTimeout(()=>{for(let e=l.value.length;e>0;e--){const n=l.value[e-1],o=document.getElementById(s.itemId?n[s.itemId]:n);o.style.left="auto",o.style.top="auto",r.unshift({x:o.offsetLeft,y:o.offsetTop})}},200)}return c({restore:L}),(e,n)=>(t.openBlock(),t.createElementBlock("div",d,[t.createElementVNode("div",{class:t.normalizeClass([s.wrapClass??"","wrapClass"]),draggable:"true",onDragover:T,onDrop:C,style:t.normalizeStyle({"flex-direction":e.$props.direction??"row"})},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(l.value,o=>(t.openBlock(),t.createElementBlock("div",{id:s.itemId?o[s.itemId]:o,key:s.itemId?o[s.itemId]:o,draggable:"true",class:t.normalizeClass(["trp",s.itemClass??""]),onDragstart:k},[t.renderSlot(e.$slots,"default",{item:o},()=>[t.createTextVNode(t.toDisplayString(o),1)],!0)],42,E))),128))],38)]))}}),V="";let B=[((a,c)=>{const f=a.__vccOpts||a;for(const[s,l]of c)f[s]=l;return f})(D,[["__scopeId","data-v-5123fe8a"]])];const g=a=>{B.map(c=>{a.component(c.name,c)})};let u=window;return typeof u<"u"&&u.Vue&&g(u.Vue),{install:g}});
